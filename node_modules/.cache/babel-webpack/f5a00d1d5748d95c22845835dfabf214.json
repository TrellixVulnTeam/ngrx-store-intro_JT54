{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Subscriber_1 = require(\"../Subscriber\");\n\nvar Subject_1 = require(\"../Subject\");\n\nfunction windowCount(windowSize, startWindowEvery) {\n  if (startWindowEvery === void 0) {\n    startWindowEvery = 0;\n  }\n\n  return function windowCountOperatorFunction(source) {\n    return source.lift(new WindowCountOperator(windowSize, startWindowEvery));\n  };\n}\n\nexports.windowCount = windowCount;\n\nvar WindowCountOperator = function () {\n  function WindowCountOperator(windowSize, startWindowEvery) {\n    this.windowSize = windowSize;\n    this.startWindowEvery = startWindowEvery;\n  }\n\n  WindowCountOperator.prototype.call = function (subscriber, source) {\n    return source.subscribe(new WindowCountSubscriber(subscriber, this.windowSize, this.startWindowEvery));\n  };\n\n  return WindowCountOperator;\n}();\n\nvar WindowCountSubscriber = function (_super) {\n  __extends(WindowCountSubscriber, _super);\n\n  function WindowCountSubscriber(destination, windowSize, startWindowEvery) {\n    var _this = _super.call(this, destination) || this;\n\n    _this.destination = destination;\n    _this.windowSize = windowSize;\n    _this.startWindowEvery = startWindowEvery;\n    _this.windows = [new Subject_1.Subject()];\n    _this.count = 0;\n    destination.next(_this.windows[0]);\n    return _this;\n  }\n\n  WindowCountSubscriber.prototype._next = function (value) {\n    var startWindowEvery = this.startWindowEvery > 0 ? this.startWindowEvery : this.windowSize;\n    var destination = this.destination;\n    var windowSize = this.windowSize;\n    var windows = this.windows;\n    var len = windows.length;\n\n    for (var i = 0; i < len && !this.closed; i++) {\n      windows[i].next(value);\n    }\n\n    var c = this.count - windowSize + 1;\n\n    if (c >= 0 && c % startWindowEvery === 0 && !this.closed) {\n      windows.shift().complete();\n    }\n\n    if (++this.count % startWindowEvery === 0 && !this.closed) {\n      var window_1 = new Subject_1.Subject();\n      windows.push(window_1);\n      destination.next(window_1);\n    }\n  };\n\n  WindowCountSubscriber.prototype._error = function (err) {\n    var windows = this.windows;\n\n    if (windows) {\n      while (windows.length > 0 && !this.closed) {\n        windows.shift().error(err);\n      }\n    }\n\n    this.destination.error(err);\n  };\n\n  WindowCountSubscriber.prototype._complete = function () {\n    var windows = this.windows;\n\n    if (windows) {\n      while (windows.length > 0 && !this.closed) {\n        windows.shift().complete();\n      }\n    }\n\n    this.destination.complete();\n  };\n\n  WindowCountSubscriber.prototype._unsubscribe = function () {\n    this.count = 0;\n    this.windows = null;\n  };\n\n  return WindowCountSubscriber;\n}(Subscriber_1.Subscriber); //# sourceMappingURL=windowCount.js.map","map":{"version":3,"sources":["/Users/volodymyrmaliarov/Projects/ngRxIntro/ngrx-store-intro/node_modules/rxjs/internal/operators/windowCount.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","defineProperty","exports","value","Subscriber_1","require","Subject_1","windowCount","windowSize","startWindowEvery","windowCountOperatorFunction","source","lift","WindowCountOperator","call","subscriber","subscribe","WindowCountSubscriber","_super","destination","_this","windows","Subject","count","next","_next","len","length","i","closed","c","shift","complete","window_1","push","_error","err","error","_complete","_unsubscribe","Subscriber"],"mappings":"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","sourcesContent":["\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Subscriber_1 = require(\"../Subscriber\");\nvar Subject_1 = require(\"../Subject\");\nfunction windowCount(windowSize, startWindowEvery) {\n    if (startWindowEvery === void 0) { startWindowEvery = 0; }\n    return function windowCountOperatorFunction(source) {\n        return source.lift(new WindowCountOperator(windowSize, startWindowEvery));\n    };\n}\nexports.windowCount = windowCount;\nvar WindowCountOperator = (function () {\n    function WindowCountOperator(windowSize, startWindowEvery) {\n        this.windowSize = windowSize;\n        this.startWindowEvery = startWindowEvery;\n    }\n    WindowCountOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new WindowCountSubscriber(subscriber, this.windowSize, this.startWindowEvery));\n    };\n    return WindowCountOperator;\n}());\nvar WindowCountSubscriber = (function (_super) {\n    __extends(WindowCountSubscriber, _super);\n    function WindowCountSubscriber(destination, windowSize, startWindowEvery) {\n        var _this = _super.call(this, destination) || this;\n        _this.destination = destination;\n        _this.windowSize = windowSize;\n        _this.startWindowEvery = startWindowEvery;\n        _this.windows = [new Subject_1.Subject()];\n        _this.count = 0;\n        destination.next(_this.windows[0]);\n        return _this;\n    }\n    WindowCountSubscriber.prototype._next = function (value) {\n        var startWindowEvery = (this.startWindowEvery > 0) ? this.startWindowEvery : this.windowSize;\n        var destination = this.destination;\n        var windowSize = this.windowSize;\n        var windows = this.windows;\n        var len = windows.length;\n        for (var i = 0; i < len && !this.closed; i++) {\n            windows[i].next(value);\n        }\n        var c = this.count - windowSize + 1;\n        if (c >= 0 && c % startWindowEvery === 0 && !this.closed) {\n            windows.shift().complete();\n        }\n        if (++this.count % startWindowEvery === 0 && !this.closed) {\n            var window_1 = new Subject_1.Subject();\n            windows.push(window_1);\n            destination.next(window_1);\n        }\n    };\n    WindowCountSubscriber.prototype._error = function (err) {\n        var windows = this.windows;\n        if (windows) {\n            while (windows.length > 0 && !this.closed) {\n                windows.shift().error(err);\n            }\n        }\n        this.destination.error(err);\n    };\n    WindowCountSubscriber.prototype._complete = function () {\n        var windows = this.windows;\n        if (windows) {\n            while (windows.length > 0 && !this.closed) {\n                windows.shift().complete();\n            }\n        }\n        this.destination.complete();\n    };\n    WindowCountSubscriber.prototype._unsubscribe = function () {\n        this.count = 0;\n        this.windows = null;\n    };\n    return WindowCountSubscriber;\n}(Subscriber_1.Subscriber));\n//# sourceMappingURL=windowCount.js.map"]},"metadata":{},"sourceType":"script"}