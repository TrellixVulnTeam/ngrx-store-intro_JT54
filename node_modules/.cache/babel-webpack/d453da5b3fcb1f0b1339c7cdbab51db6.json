{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Observable_1 = require(\"../Observable\");\n\nvar AsyncSubject_1 = require(\"../AsyncSubject\");\n\nvar map_1 = require(\"../operators/map\");\n\nvar canReportError_1 = require(\"../util/canReportError\");\n\nvar isScheduler_1 = require(\"../util/isScheduler\");\n\nvar isArray_1 = require(\"../util/isArray\");\n\nfunction bindNodeCallback(callbackFunc, resultSelector, scheduler) {\n  if (resultSelector) {\n    if (isScheduler_1.isScheduler(resultSelector)) {\n      scheduler = resultSelector;\n    } else {\n      return function () {\n        var args = [];\n\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n\n        return bindNodeCallback(callbackFunc, scheduler).apply(void 0, args).pipe(map_1.map(function (args) {\n          return isArray_1.isArray(args) ? resultSelector.apply(void 0, args) : resultSelector(args);\n        }));\n      };\n    }\n  }\n\n  return function () {\n    var args = [];\n\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args[_i] = arguments[_i];\n    }\n\n    var params = {\n      subject: undefined,\n      args: args,\n      callbackFunc: callbackFunc,\n      scheduler: scheduler,\n      context: this\n    };\n    return new Observable_1.Observable(function (subscriber) {\n      var context = params.context;\n      var subject = params.subject;\n\n      if (!scheduler) {\n        if (!subject) {\n          subject = params.subject = new AsyncSubject_1.AsyncSubject();\n\n          var handler = function handler() {\n            var innerArgs = [];\n\n            for (var _i = 0; _i < arguments.length; _i++) {\n              innerArgs[_i] = arguments[_i];\n            }\n\n            var err = innerArgs.shift();\n\n            if (err) {\n              subject.error(err);\n              return;\n            }\n\n            subject.next(innerArgs.length <= 1 ? innerArgs[0] : innerArgs);\n            subject.complete();\n          };\n\n          try {\n            callbackFunc.apply(context, args.concat([handler]));\n          } catch (err) {\n            if (canReportError_1.canReportError(subject)) {\n              subject.error(err);\n            } else {\n              console.warn(err);\n            }\n          }\n        }\n\n        return subject.subscribe(subscriber);\n      } else {\n        return scheduler.schedule(dispatch, 0, {\n          params: params,\n          subscriber: subscriber,\n          context: context\n        });\n      }\n    });\n  };\n}\n\nexports.bindNodeCallback = bindNodeCallback;\n\nfunction dispatch(state) {\n  var _this = this;\n\n  var params = state.params,\n      subscriber = state.subscriber,\n      context = state.context;\n  var callbackFunc = params.callbackFunc,\n      args = params.args,\n      scheduler = params.scheduler;\n  var subject = params.subject;\n\n  if (!subject) {\n    subject = params.subject = new AsyncSubject_1.AsyncSubject();\n\n    var handler = function handler() {\n      var innerArgs = [];\n\n      for (var _i = 0; _i < arguments.length; _i++) {\n        innerArgs[_i] = arguments[_i];\n      }\n\n      var err = innerArgs.shift();\n\n      if (err) {\n        _this.add(scheduler.schedule(dispatchError, 0, {\n          err: err,\n          subject: subject\n        }));\n      } else {\n        var value = innerArgs.length <= 1 ? innerArgs[0] : innerArgs;\n\n        _this.add(scheduler.schedule(dispatchNext, 0, {\n          value: value,\n          subject: subject\n        }));\n      }\n    };\n\n    try {\n      callbackFunc.apply(context, args.concat([handler]));\n    } catch (err) {\n      this.add(scheduler.schedule(dispatchError, 0, {\n        err: err,\n        subject: subject\n      }));\n    }\n  }\n\n  this.add(subject.subscribe(subscriber));\n}\n\nfunction dispatchNext(arg) {\n  var value = arg.value,\n      subject = arg.subject;\n  subject.next(value);\n  subject.complete();\n}\n\nfunction dispatchError(arg) {\n  var err = arg.err,\n      subject = arg.subject;\n  subject.error(err);\n} //# sourceMappingURL=bindNodeCallback.js.map","map":{"version":3,"sources":["/Users/volodymyrmaliarov/Projects/ngRxIntro/ngrx-store-intro/node_modules/rxjs/internal/observable/bindNodeCallback.js"],"names":["Object","defineProperty","exports","value","Observable_1","require","AsyncSubject_1","map_1","canReportError_1","isScheduler_1","isArray_1","bindNodeCallback","callbackFunc","resultSelector","scheduler","isScheduler","args","_i","arguments","length","apply","pipe","map","isArray","params","subject","undefined","context","Observable","subscriber","AsyncSubject","handler","innerArgs","err","shift","error","next","complete","concat","canReportError","console","warn","subscribe","schedule","dispatch","state","_this","add","dispatchError","dispatchNext","arg"],"mappings":"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","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Observable_1 = require(\"../Observable\");\nvar AsyncSubject_1 = require(\"../AsyncSubject\");\nvar map_1 = require(\"../operators/map\");\nvar canReportError_1 = require(\"../util/canReportError\");\nvar isScheduler_1 = require(\"../util/isScheduler\");\nvar isArray_1 = require(\"../util/isArray\");\nfunction bindNodeCallback(callbackFunc, resultSelector, scheduler) {\n    if (resultSelector) {\n        if (isScheduler_1.isScheduler(resultSelector)) {\n            scheduler = resultSelector;\n        }\n        else {\n            return function () {\n                var args = [];\n                for (var _i = 0; _i < arguments.length; _i++) {\n                    args[_i] = arguments[_i];\n                }\n                return bindNodeCallback(callbackFunc, scheduler).apply(void 0, args).pipe(map_1.map(function (args) { return isArray_1.isArray(args) ? resultSelector.apply(void 0, args) : resultSelector(args); }));\n            };\n        }\n    }\n    return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        var params = {\n            subject: undefined,\n            args: args,\n            callbackFunc: callbackFunc,\n            scheduler: scheduler,\n            context: this,\n        };\n        return new Observable_1.Observable(function (subscriber) {\n            var context = params.context;\n            var subject = params.subject;\n            if (!scheduler) {\n                if (!subject) {\n                    subject = params.subject = new AsyncSubject_1.AsyncSubject();\n                    var handler = function () {\n                        var innerArgs = [];\n                        for (var _i = 0; _i < arguments.length; _i++) {\n                            innerArgs[_i] = arguments[_i];\n                        }\n                        var err = innerArgs.shift();\n                        if (err) {\n                            subject.error(err);\n                            return;\n                        }\n                        subject.next(innerArgs.length <= 1 ? innerArgs[0] : innerArgs);\n                        subject.complete();\n                    };\n                    try {\n                        callbackFunc.apply(context, args.concat([handler]));\n                    }\n                    catch (err) {\n                        if (canReportError_1.canReportError(subject)) {\n                            subject.error(err);\n                        }\n                        else {\n                            console.warn(err);\n                        }\n                    }\n                }\n                return subject.subscribe(subscriber);\n            }\n            else {\n                return scheduler.schedule(dispatch, 0, { params: params, subscriber: subscriber, context: context });\n            }\n        });\n    };\n}\nexports.bindNodeCallback = bindNodeCallback;\nfunction dispatch(state) {\n    var _this = this;\n    var params = state.params, subscriber = state.subscriber, context = state.context;\n    var callbackFunc = params.callbackFunc, args = params.args, scheduler = params.scheduler;\n    var subject = params.subject;\n    if (!subject) {\n        subject = params.subject = new AsyncSubject_1.AsyncSubject();\n        var handler = function () {\n            var innerArgs = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                innerArgs[_i] = arguments[_i];\n            }\n            var err = innerArgs.shift();\n            if (err) {\n                _this.add(scheduler.schedule(dispatchError, 0, { err: err, subject: subject }));\n            }\n            else {\n                var value = innerArgs.length <= 1 ? innerArgs[0] : innerArgs;\n                _this.add(scheduler.schedule(dispatchNext, 0, { value: value, subject: subject }));\n            }\n        };\n        try {\n            callbackFunc.apply(context, args.concat([handler]));\n        }\n        catch (err) {\n            this.add(scheduler.schedule(dispatchError, 0, { err: err, subject: subject }));\n        }\n    }\n    this.add(subject.subscribe(subscriber));\n}\nfunction dispatchNext(arg) {\n    var value = arg.value, subject = arg.subject;\n    subject.next(value);\n    subject.complete();\n}\nfunction dispatchError(arg) {\n    var err = arg.err, subject = arg.subject;\n    subject.error(err);\n}\n//# sourceMappingURL=bindNodeCallback.js.map"]},"metadata":{},"sourceType":"script"}