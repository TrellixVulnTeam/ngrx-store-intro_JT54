{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Observable_1 = require(\"../Observable\");\n\nvar AsyncSubject_1 = require(\"../AsyncSubject\");\n\nvar map_1 = require(\"../operators/map\");\n\nvar canReportError_1 = require(\"../util/canReportError\");\n\nvar isArray_1 = require(\"../util/isArray\");\n\nvar isScheduler_1 = require(\"../util/isScheduler\");\n\nfunction bindCallback(callbackFunc, resultSelector, scheduler) {\n  if (resultSelector) {\n    if (isScheduler_1.isScheduler(resultSelector)) {\n      scheduler = resultSelector;\n    } else {\n      return function () {\n        var args = [];\n\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n\n        return bindCallback(callbackFunc, scheduler).apply(void 0, args).pipe(map_1.map(function (args) {\n          return isArray_1.isArray(args) ? resultSelector.apply(void 0, args) : resultSelector(args);\n        }));\n      };\n    }\n  }\n\n  return function () {\n    var args = [];\n\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args[_i] = arguments[_i];\n    }\n\n    var context = this;\n    var subject;\n    var params = {\n      context: context,\n      subject: subject,\n      callbackFunc: callbackFunc,\n      scheduler: scheduler\n    };\n    return new Observable_1.Observable(function (subscriber) {\n      if (!scheduler) {\n        if (!subject) {\n          subject = new AsyncSubject_1.AsyncSubject();\n\n          var handler = function handler() {\n            var innerArgs = [];\n\n            for (var _i = 0; _i < arguments.length; _i++) {\n              innerArgs[_i] = arguments[_i];\n            }\n\n            subject.next(innerArgs.length <= 1 ? innerArgs[0] : innerArgs);\n            subject.complete();\n          };\n\n          try {\n            callbackFunc.apply(context, args.concat([handler]));\n          } catch (err) {\n            if (canReportError_1.canReportError(subject)) {\n              subject.error(err);\n            } else {\n              console.warn(err);\n            }\n          }\n        }\n\n        return subject.subscribe(subscriber);\n      } else {\n        var state = {\n          args: args,\n          subscriber: subscriber,\n          params: params\n        };\n        return scheduler.schedule(dispatch, 0, state);\n      }\n    });\n  };\n}\n\nexports.bindCallback = bindCallback;\n\nfunction dispatch(state) {\n  var _this = this;\n\n  var self = this;\n  var args = state.args,\n      subscriber = state.subscriber,\n      params = state.params;\n  var callbackFunc = params.callbackFunc,\n      context = params.context,\n      scheduler = params.scheduler;\n  var subject = params.subject;\n\n  if (!subject) {\n    subject = params.subject = new AsyncSubject_1.AsyncSubject();\n\n    var handler = function handler() {\n      var innerArgs = [];\n\n      for (var _i = 0; _i < arguments.length; _i++) {\n        innerArgs[_i] = arguments[_i];\n      }\n\n      var value = innerArgs.length <= 1 ? innerArgs[0] : innerArgs;\n\n      _this.add(scheduler.schedule(dispatchNext, 0, {\n        value: value,\n        subject: subject\n      }));\n    };\n\n    try {\n      callbackFunc.apply(context, args.concat([handler]));\n    } catch (err) {\n      subject.error(err);\n    }\n  }\n\n  this.add(subject.subscribe(subscriber));\n}\n\nfunction dispatchNext(state) {\n  var value = state.value,\n      subject = state.subject;\n  subject.next(value);\n  subject.complete();\n}\n\nfunction dispatchError(state) {\n  var err = state.err,\n      subject = state.subject;\n  subject.error(err);\n} //# sourceMappingURL=bindCallback.js.map","map":{"version":3,"sources":["/Users/volodymyrmaliarov/Projects/ngRxIntro/ngrx-store-intro/node_modules/rxjs/internal/observable/bindCallback.js"],"names":["Object","defineProperty","exports","value","Observable_1","require","AsyncSubject_1","map_1","canReportError_1","isArray_1","isScheduler_1","bindCallback","callbackFunc","resultSelector","scheduler","isScheduler","args","_i","arguments","length","apply","pipe","map","isArray","context","subject","params","Observable","subscriber","AsyncSubject","handler","innerArgs","next","complete","concat","err","canReportError","error","console","warn","subscribe","state","schedule","dispatch","_this","self","add","dispatchNext","dispatchError"],"mappings":"AAAA;;AACAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAAEC,EAAAA,KAAK,EAAE;AAAT,CAA7C;;AACA,IAAIC,YAAY,GAAGC,OAAO,CAAC,eAAD,CAA1B;;AACA,IAAIC,cAAc,GAAGD,OAAO,CAAC,iBAAD,CAA5B;;AACA,IAAIE,KAAK,GAAGF,OAAO,CAAC,kBAAD,CAAnB;;AACA,IAAIG,gBAAgB,GAAGH,OAAO,CAAC,wBAAD,CAA9B;;AACA,IAAII,SAAS,GAAGJ,OAAO,CAAC,iBAAD,CAAvB;;AACA,IAAIK,aAAa,GAAGL,OAAO,CAAC,qBAAD,CAA3B;;AACA,SAASM,YAAT,CAAsBC,YAAtB,EAAoCC,cAApC,EAAoDC,SAApD,EAA+D;AAC3D,MAAID,cAAJ,EAAoB;AAChB,QAAIH,aAAa,CAACK,WAAd,CAA0BF,cAA1B,CAAJ,EAA+C;AAC3CC,MAAAA,SAAS,GAAGD,cAAZ;AACH,KAFD,MAGK;AACD,aAAO,YAAY;AACf,YAAIG,IAAI,GAAG,EAAX;;AACA,aAAK,IAAIC,EAAE,GAAG,CAAd,EAAiBA,EAAE,GAAGC,SAAS,CAACC,MAAhC,EAAwCF,EAAE,EAA1C,EAA8C;AAC1CD,UAAAA,IAAI,CAACC,EAAD,CAAJ,GAAWC,SAAS,CAACD,EAAD,CAApB;AACH;;AACD,eAAON,YAAY,CAACC,YAAD,EAAeE,SAAf,CAAZ,CAAsCM,KAAtC,CAA4C,KAAK,CAAjD,EAAoDJ,IAApD,EAA0DK,IAA1D,CAA+Dd,KAAK,CAACe,GAAN,CAAU,UAAUN,IAAV,EAAgB;AAAE,iBAAOP,SAAS,CAACc,OAAV,CAAkBP,IAAlB,IAA0BH,cAAc,CAACO,KAAf,CAAqB,KAAK,CAA1B,EAA6BJ,IAA7B,CAA1B,GAA+DH,cAAc,CAACG,IAAD,CAApF;AAA6F,SAAzH,CAA/D,CAAP;AACH,OAND;AAOH;AACJ;;AACD,SAAO,YAAY;AACf,QAAIA,IAAI,GAAG,EAAX;;AACA,SAAK,IAAIC,EAAE,GAAG,CAAd,EAAiBA,EAAE,GAAGC,SAAS,CAACC,MAAhC,EAAwCF,EAAE,EAA1C,EAA8C;AAC1CD,MAAAA,IAAI,CAACC,EAAD,CAAJ,GAAWC,SAAS,CAACD,EAAD,CAApB;AACH;;AACD,QAAIO,OAAO,GAAG,IAAd;AACA,QAAIC,OAAJ;AACA,QAAIC,MAAM,GAAG;AACTF,MAAAA,OAAO,EAAEA,OADA;AAETC,MAAAA,OAAO,EAAEA,OAFA;AAGTb,MAAAA,YAAY,EAAEA,YAHL;AAITE,MAAAA,SAAS,EAAEA;AAJF,KAAb;AAMA,WAAO,IAAIV,YAAY,CAACuB,UAAjB,CAA4B,UAAUC,UAAV,EAAsB;AACrD,UAAI,CAACd,SAAL,EAAgB;AACZ,YAAI,CAACW,OAAL,EAAc;AACVA,UAAAA,OAAO,GAAG,IAAInB,cAAc,CAACuB,YAAnB,EAAV;;AACA,cAAIC,OAAO,GAAG,SAAVA,OAAU,GAAY;AACtB,gBAAIC,SAAS,GAAG,EAAhB;;AACA,iBAAK,IAAId,EAAE,GAAG,CAAd,EAAiBA,EAAE,GAAGC,SAAS,CAACC,MAAhC,EAAwCF,EAAE,EAA1C,EAA8C;AAC1Cc,cAAAA,SAAS,CAACd,EAAD,CAAT,GAAgBC,SAAS,CAACD,EAAD,CAAzB;AACH;;AACDQ,YAAAA,OAAO,CAACO,IAAR,CAAaD,SAAS,CAACZ,MAAV,IAAoB,CAApB,GAAwBY,SAAS,CAAC,CAAD,CAAjC,GAAuCA,SAApD;AACAN,YAAAA,OAAO,CAACQ,QAAR;AACH,WAPD;;AAQA,cAAI;AACArB,YAAAA,YAAY,CAACQ,KAAb,CAAmBI,OAAnB,EAA4BR,IAAI,CAACkB,MAAL,CAAY,CAACJ,OAAD,CAAZ,CAA5B;AACH,WAFD,CAGA,OAAOK,GAAP,EAAY;AACR,gBAAI3B,gBAAgB,CAAC4B,cAAjB,CAAgCX,OAAhC,CAAJ,EAA8C;AAC1CA,cAAAA,OAAO,CAACY,KAAR,CAAcF,GAAd;AACH,aAFD,MAGK;AACDG,cAAAA,OAAO,CAACC,IAAR,CAAaJ,GAAb;AACH;AACJ;AACJ;;AACD,eAAOV,OAAO,CAACe,SAAR,CAAkBZ,UAAlB,CAAP;AACH,OAxBD,MAyBK;AACD,YAAIa,KAAK,GAAG;AACRzB,UAAAA,IAAI,EAAEA,IADE;AACIY,UAAAA,UAAU,EAAEA,UADhB;AAC4BF,UAAAA,MAAM,EAAEA;AADpC,SAAZ;AAGA,eAAOZ,SAAS,CAAC4B,QAAV,CAAmBC,QAAnB,EAA6B,CAA7B,EAAgCF,KAAhC,CAAP;AACH;AACJ,KAhCM,CAAP;AAiCH,GA9CD;AA+CH;;AACDvC,OAAO,CAACS,YAAR,GAAuBA,YAAvB;;AACA,SAASgC,QAAT,CAAkBF,KAAlB,EAAyB;AACrB,MAAIG,KAAK,GAAG,IAAZ;;AACA,MAAIC,IAAI,GAAG,IAAX;AACA,MAAI7B,IAAI,GAAGyB,KAAK,CAACzB,IAAjB;AAAA,MAAuBY,UAAU,GAAGa,KAAK,CAACb,UAA1C;AAAA,MAAsDF,MAAM,GAAGe,KAAK,CAACf,MAArE;AACA,MAAId,YAAY,GAAGc,MAAM,CAACd,YAA1B;AAAA,MAAwCY,OAAO,GAAGE,MAAM,CAACF,OAAzD;AAAA,MAAkEV,SAAS,GAAGY,MAAM,CAACZ,SAArF;AACA,MAAIW,OAAO,GAAGC,MAAM,CAACD,OAArB;;AACA,MAAI,CAACA,OAAL,EAAc;AACVA,IAAAA,OAAO,GAAGC,MAAM,CAACD,OAAP,GAAiB,IAAInB,cAAc,CAACuB,YAAnB,EAA3B;;AACA,QAAIC,OAAO,GAAG,SAAVA,OAAU,GAAY;AACtB,UAAIC,SAAS,GAAG,EAAhB;;AACA,WAAK,IAAId,EAAE,GAAG,CAAd,EAAiBA,EAAE,GAAGC,SAAS,CAACC,MAAhC,EAAwCF,EAAE,EAA1C,EAA8C;AAC1Cc,QAAAA,SAAS,CAACd,EAAD,CAAT,GAAgBC,SAAS,CAACD,EAAD,CAAzB;AACH;;AACD,UAAId,KAAK,GAAG4B,SAAS,CAACZ,MAAV,IAAoB,CAApB,GAAwBY,SAAS,CAAC,CAAD,CAAjC,GAAuCA,SAAnD;;AACAa,MAAAA,KAAK,CAACE,GAAN,CAAUhC,SAAS,CAAC4B,QAAV,CAAmBK,YAAnB,EAAiC,CAAjC,EAAoC;AAAE5C,QAAAA,KAAK,EAAEA,KAAT;AAAgBsB,QAAAA,OAAO,EAAEA;AAAzB,OAApC,CAAV;AACH,KAPD;;AAQA,QAAI;AACAb,MAAAA,YAAY,CAACQ,KAAb,CAAmBI,OAAnB,EAA4BR,IAAI,CAACkB,MAAL,CAAY,CAACJ,OAAD,CAAZ,CAA5B;AACH,KAFD,CAGA,OAAOK,GAAP,EAAY;AACRV,MAAAA,OAAO,CAACY,KAAR,CAAcF,GAAd;AACH;AACJ;;AACD,OAAKW,GAAL,CAASrB,OAAO,CAACe,SAAR,CAAkBZ,UAAlB,CAAT;AACH;;AACD,SAASmB,YAAT,CAAsBN,KAAtB,EAA6B;AACzB,MAAItC,KAAK,GAAGsC,KAAK,CAACtC,KAAlB;AAAA,MAAyBsB,OAAO,GAAGgB,KAAK,CAAChB,OAAzC;AACAA,EAAAA,OAAO,CAACO,IAAR,CAAa7B,KAAb;AACAsB,EAAAA,OAAO,CAACQ,QAAR;AACH;;AACD,SAASe,aAAT,CAAuBP,KAAvB,EAA8B;AAC1B,MAAIN,GAAG,GAAGM,KAAK,CAACN,GAAhB;AAAA,MAAqBV,OAAO,GAAGgB,KAAK,CAAChB,OAArC;AACAA,EAAAA,OAAO,CAACY,KAAR,CAAcF,GAAd;AACH,C,CACD","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Observable_1 = require(\"../Observable\");\nvar AsyncSubject_1 = require(\"../AsyncSubject\");\nvar map_1 = require(\"../operators/map\");\nvar canReportError_1 = require(\"../util/canReportError\");\nvar isArray_1 = require(\"../util/isArray\");\nvar isScheduler_1 = require(\"../util/isScheduler\");\nfunction bindCallback(callbackFunc, resultSelector, scheduler) {\n    if (resultSelector) {\n        if (isScheduler_1.isScheduler(resultSelector)) {\n            scheduler = resultSelector;\n        }\n        else {\n            return function () {\n                var args = [];\n                for (var _i = 0; _i < arguments.length; _i++) {\n                    args[_i] = arguments[_i];\n                }\n                return bindCallback(callbackFunc, scheduler).apply(void 0, args).pipe(map_1.map(function (args) { return isArray_1.isArray(args) ? resultSelector.apply(void 0, args) : resultSelector(args); }));\n            };\n        }\n    }\n    return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        var context = this;\n        var subject;\n        var params = {\n            context: context,\n            subject: subject,\n            callbackFunc: callbackFunc,\n            scheduler: scheduler,\n        };\n        return new Observable_1.Observable(function (subscriber) {\n            if (!scheduler) {\n                if (!subject) {\n                    subject = new AsyncSubject_1.AsyncSubject();\n                    var handler = function () {\n                        var innerArgs = [];\n                        for (var _i = 0; _i < arguments.length; _i++) {\n                            innerArgs[_i] = arguments[_i];\n                        }\n                        subject.next(innerArgs.length <= 1 ? innerArgs[0] : innerArgs);\n                        subject.complete();\n                    };\n                    try {\n                        callbackFunc.apply(context, args.concat([handler]));\n                    }\n                    catch (err) {\n                        if (canReportError_1.canReportError(subject)) {\n                            subject.error(err);\n                        }\n                        else {\n                            console.warn(err);\n                        }\n                    }\n                }\n                return subject.subscribe(subscriber);\n            }\n            else {\n                var state = {\n                    args: args, subscriber: subscriber, params: params,\n                };\n                return scheduler.schedule(dispatch, 0, state);\n            }\n        });\n    };\n}\nexports.bindCallback = bindCallback;\nfunction dispatch(state) {\n    var _this = this;\n    var self = this;\n    var args = state.args, subscriber = state.subscriber, params = state.params;\n    var callbackFunc = params.callbackFunc, context = params.context, scheduler = params.scheduler;\n    var subject = params.subject;\n    if (!subject) {\n        subject = params.subject = new AsyncSubject_1.AsyncSubject();\n        var handler = function () {\n            var innerArgs = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                innerArgs[_i] = arguments[_i];\n            }\n            var value = innerArgs.length <= 1 ? innerArgs[0] : innerArgs;\n            _this.add(scheduler.schedule(dispatchNext, 0, { value: value, subject: subject }));\n        };\n        try {\n            callbackFunc.apply(context, args.concat([handler]));\n        }\n        catch (err) {\n            subject.error(err);\n        }\n    }\n    this.add(subject.subscribe(subscriber));\n}\nfunction dispatchNext(state) {\n    var value = state.value, subject = state.subject;\n    subject.next(value);\n    subject.complete();\n}\nfunction dispatchError(state) {\n    var err = state.err, subject = state.subject;\n    subject.error(err);\n}\n//# sourceMappingURL=bindCallback.js.map"]},"metadata":{},"sourceType":"script"}