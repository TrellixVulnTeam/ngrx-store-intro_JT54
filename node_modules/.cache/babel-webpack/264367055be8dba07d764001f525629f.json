{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Observable_1 = require(\"../Observable\");\n\nvar isArray_1 = require(\"../util/isArray\");\n\nvar map_1 = require(\"../operators/map\");\n\nvar isObject_1 = require(\"../util/isObject\");\n\nvar from_1 = require(\"./from\");\n\nfunction forkJoin() {\n  var sources = [];\n\n  for (var _i = 0; _i < arguments.length; _i++) {\n    sources[_i] = arguments[_i];\n  }\n\n  if (sources.length === 1) {\n    var first_1 = sources[0];\n\n    if (isArray_1.isArray(first_1)) {\n      return forkJoinInternal(first_1, null);\n    }\n\n    if (isObject_1.isObject(first_1) && Object.getPrototypeOf(first_1) === Object.prototype) {\n      var keys = Object.keys(first_1);\n      return forkJoinInternal(keys.map(function (key) {\n        return first_1[key];\n      }), keys);\n    }\n  }\n\n  if (typeof sources[sources.length - 1] === 'function') {\n    var resultSelector_1 = sources.pop();\n    sources = sources.length === 1 && isArray_1.isArray(sources[0]) ? sources[0] : sources;\n    return forkJoinInternal(sources, null).pipe(map_1.map(function (args) {\n      return resultSelector_1.apply(void 0, args);\n    }));\n  }\n\n  return forkJoinInternal(sources, null);\n}\n\nexports.forkJoin = forkJoin;\n\nfunction forkJoinInternal(sources, keys) {\n  return new Observable_1.Observable(function (subscriber) {\n    var len = sources.length;\n\n    if (len === 0) {\n      subscriber.complete();\n      return;\n    }\n\n    var values = new Array(len);\n    var completed = 0;\n    var emitted = 0;\n\n    var _loop_1 = function _loop_1(i) {\n      var source = from_1.from(sources[i]);\n      var hasValue = false;\n      subscriber.add(source.subscribe({\n        next: function next(value) {\n          if (!hasValue) {\n            hasValue = true;\n            emitted++;\n          }\n\n          values[i] = value;\n        },\n        error: function error(err) {\n          return subscriber.error(err);\n        },\n        complete: function complete() {\n          completed++;\n\n          if (completed === len || !hasValue) {\n            if (emitted === len) {\n              subscriber.next(keys ? keys.reduce(function (result, key, i) {\n                return result[key] = values[i], result;\n              }, {}) : values);\n            }\n\n            subscriber.complete();\n          }\n        }\n      }));\n    };\n\n    for (var i = 0; i < len; i++) {\n      _loop_1(i);\n    }\n  });\n} //# sourceMappingURL=forkJoin.js.map","map":{"version":3,"sources":["/Users/volodymyrmaliarov/Projects/ngRxIntro/ngrx-store-intro/node_modules/rxjs/internal/observable/forkJoin.js"],"names":["Object","defineProperty","exports","value","Observable_1","require","isArray_1","map_1","isObject_1","from_1","forkJoin","sources","_i","arguments","length","first_1","isArray","forkJoinInternal","isObject","getPrototypeOf","prototype","keys","map","key","resultSelector_1","pop","pipe","args","apply","Observable","subscriber","len","complete","values","Array","completed","emitted","_loop_1","i","source","from","hasValue","add","subscribe","next","error","err","reduce","result"],"mappings":"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","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Observable_1 = require(\"../Observable\");\nvar isArray_1 = require(\"../util/isArray\");\nvar map_1 = require(\"../operators/map\");\nvar isObject_1 = require(\"../util/isObject\");\nvar from_1 = require(\"./from\");\nfunction forkJoin() {\n    var sources = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        sources[_i] = arguments[_i];\n    }\n    if (sources.length === 1) {\n        var first_1 = sources[0];\n        if (isArray_1.isArray(first_1)) {\n            return forkJoinInternal(first_1, null);\n        }\n        if (isObject_1.isObject(first_1) && Object.getPrototypeOf(first_1) === Object.prototype) {\n            var keys = Object.keys(first_1);\n            return forkJoinInternal(keys.map(function (key) { return first_1[key]; }), keys);\n        }\n    }\n    if (typeof sources[sources.length - 1] === 'function') {\n        var resultSelector_1 = sources.pop();\n        sources = (sources.length === 1 && isArray_1.isArray(sources[0])) ? sources[0] : sources;\n        return forkJoinInternal(sources, null).pipe(map_1.map(function (args) { return resultSelector_1.apply(void 0, args); }));\n    }\n    return forkJoinInternal(sources, null);\n}\nexports.forkJoin = forkJoin;\nfunction forkJoinInternal(sources, keys) {\n    return new Observable_1.Observable(function (subscriber) {\n        var len = sources.length;\n        if (len === 0) {\n            subscriber.complete();\n            return;\n        }\n        var values = new Array(len);\n        var completed = 0;\n        var emitted = 0;\n        var _loop_1 = function (i) {\n            var source = from_1.from(sources[i]);\n            var hasValue = false;\n            subscriber.add(source.subscribe({\n                next: function (value) {\n                    if (!hasValue) {\n                        hasValue = true;\n                        emitted++;\n                    }\n                    values[i] = value;\n                },\n                error: function (err) { return subscriber.error(err); },\n                complete: function () {\n                    completed++;\n                    if (completed === len || !hasValue) {\n                        if (emitted === len) {\n                            subscriber.next(keys ?\n                                keys.reduce(function (result, key, i) { return (result[key] = values[i], result); }, {}) :\n                                values);\n                        }\n                        subscriber.complete();\n                    }\n                }\n            }));\n        };\n        for (var i = 0; i < len; i++) {\n            _loop_1(i);\n        }\n    });\n}\n//# sourceMappingURL=forkJoin.js.map"]},"metadata":{},"sourceType":"script"}